import { FormulaCase, MedicineSchool } from '@/types'

// 강의에서 언급된 대표 처방 사례 데이터베이스
export const FORMULA_CASES: FormulaCase[] = [
  // ========== 고방(古方) ==========
  {
    id: 'gyeji-tang',
    name: '계지탕',
    hanja: '桂枝湯',
    school: 'classical',
    category: '해표제-신온해표',
    indication: '태양중풍증(太陽中風證). 오한, 발열, 두통, 땀이 나는 증상.',
    keySymptoms: ['오한', '발열', '두통', '자한', '맥부완'],
    targetPatterns: ['태양중풍증'],
    contraindications: ['표실무한', '온병초기', '내열증'],
    modernApplications: ['감기 초기', '두드러기', '냉방병'],
    herbs: [
      { name: '계지', amount: '9g', role: '군', function: '해기발표, 온통경맥' },
      { name: '백작약', amount: '9g', role: '신', function: '영음화영' },
      { name: '생강', amount: '9g', role: '좌', function: '산한지구' },
      { name: '대조', amount: '4개', role: '좌', function: '보비화중' },
      { name: '감초', amount: '6g', role: '사', function: '조화제약' },
    ],
    clinicalNotes: '상한론의 대표 처방. 표증에 땀이 나면서 열이 있을 때 사용. 영위불화를 조화시킴.',
    lectureNotes: '고방의 대표적 처방. 6경변증 중 태양병의 중풍에 해당.',
  },
  {
    id: 'mahwang-tang',
    name: '마황탕',
    hanja: '麻黃湯',
    school: 'classical',
    category: '해표제-신온해표',
    indication: '태양상한증(太陽傷寒證). 오한, 발열, 두통, 땀이 나지 않음.',
    keySymptoms: ['오한', '발열', '두통', '신통', '무한', '맥부긴'],
    targetPatterns: ['태양상한증'],
    contraindications: ['표허자한', '음허', '심계'],
    modernApplications: ['감기', '기관지염', '천식 초기'],
    herbs: [
      { name: '마황', amount: '9g', role: '군', function: '발한해표, 선폐평천' },
      { name: '계지', amount: '6g', role: '신', function: '온경산한' },
      { name: '행인', amount: '9g', role: '좌', function: '강기평천' },
      { name: '감초', amount: '3g', role: '사', function: '조화제약' },
    ],
    clinicalNotes: '상한론의 핵심 처방. 표한증에 땀이 없을 때 발한시키는 대표 처방.',
  },
  {
    id: 'sochungryong-tang',
    name: '소청룡탕',
    hanja: '小靑龍湯',
    school: 'classical',
    category: '해표제-발산풍한',
    indication: '외한내음증(外寒內飮證). 오한, 발열, 기침, 희박한 가래.',
    keySymptoms: ['오한', '발열', '해수', '희박한 담', '천명'],
    targetPatterns: ['표한리음증', '한음사폐증'],
    contraindications: ['음허조열', '건해무담'],
    modernApplications: ['급성 기관지염', '기관지 천식', '알레르기성 비염'],
    herbs: [
      { name: '마황', amount: '9g', role: '군', function: '발한해표' },
      { name: '계지', amount: '9g', role: '신', function: '온경산한' },
      { name: '건강', amount: '9g', role: '좌', function: '온폐화음' },
      { name: '세신', amount: '3g', role: '좌', function: '온폐화음' },
      { name: '반하', amount: '9g', role: '좌', function: '연비화담' },
      { name: '오미자', amount: '6g', role: '좌', function: '염폐지해' },
      { name: '백작약', amount: '9g', role: '좌', function: '화영지통' },
      { name: '감초', amount: '6g', role: '사', function: '조화제약' },
    ],
    clinicalNotes: '외한내음을 치료하는 대표 처방. 겨울철 감기에 가래가 많을 때 적합.',
  },
  {
    id: 'sosiho-tang',
    name: '소시호탕',
    hanja: '小柴胡湯',
    school: 'classical',
    category: '화해제-화해소양',
    indication: '소양병증(少陽病證). 왕래한열, 흉협고만, 구고, 인건, 현훈.',
    keySymptoms: ['왕래한열', '흉협고만', '구고', '인건', '목현', '심번희구'],
    targetPatterns: ['소양병증', '반표반리증'],
    contraindications: ['음허혈소', '간화왕성'],
    modernApplications: ['감기', '간염', '담낭염', '급성 췌장염'],
    herbs: [
      { name: '시호', amount: '12g', role: '군', function: '화해소양' },
      { name: '황금', amount: '9g', role: '신', function: '청열조습' },
      { name: '반하', amount: '9g', role: '좌', function: '화담강역' },
      { name: '인삼', amount: '6g', role: '좌', function: '부정거사' },
      { name: '생강', amount: '9g', role: '좌', function: '조화비위' },
      { name: '대조', amount: '4개', role: '좌', function: '보비화중' },
      { name: '감초', amount: '6g', role: '사', function: '조화제약' },
    ],
    clinicalNotes: '상한론의 핵심 처방. 소양병, 반표반리증에 사용. 화해법의 대표 처방.',
    lectureNotes: '시호탕류 고방의 대표. 왕래한열, 흉협고만이 핵심 증상.',
  },
  {
    id: 'ijung-tang',
    name: '이중탕',
    hanja: '理中湯',
    school: 'classical',
    category: '온리제-온중거한',
    indication: '비위허한증(脾胃虛寒證). 복통, 설사, 구토, 식욕부진.',
    keySymptoms: ['복냉', '복통', '설사', '구토', '식욕부진'],
    targetPatterns: ['비위허한증', '중초허한증'],
    contraindications: ['음허화왕', '실열증'],
    modernApplications: ['만성 위염', '위궤양', '과민성 대장증후군'],
    herbs: [
      { name: '인삼', amount: '9g', role: '군', function: '대보원기' },
      { name: '백출', amount: '9g', role: '신', function: '건비조습' },
      { name: '건강', amount: '9g', role: '좌', function: '온중거한' },
      { name: '감초', amount: '6g', role: '사', function: '조화제약' },
    ],
    clinicalNotes: '중초허한의 대표 처방. 비위를 따뜻하게 하여 소화 기능 회복.',
  },
  {
    id: 'hwangryun-ajiao-tang',
    name: '황련아교탕',
    hanja: '黃連阿膠湯',
    school: 'classical',
    category: '청열제-청열양혈',
    indication: '음허화왕증(陰虛火旺證). 불면, 번조, 심계.',
    keySymptoms: ['불면', '번조', '심계', '도한', '오심번열'],
    targetPatterns: ['음허화왕증', '심신불교증'],
    contraindications: ['양허', '비위허한'],
    modernApplications: ['불면증', '갱년기 장애', '우울증'],
    herbs: [
      { name: '황련', amount: '12g', role: '군', function: '청심사화' },
      { name: '황금', amount: '6g', role: '신', function: '청열조습' },
      { name: '백작약', amount: '6g', role: '좌', function: '양혈렴음' },
      { name: '아교', amount: '9g', role: '좌', function: '자음보혈' },
      { name: '계자황', amount: '2개', role: '사', function: '자음윤조' },
    ],
    clinicalNotes: '상한론의 불면 치료 대표 처방. 심화가 항성하여 잠을 못 잘 때 사용.',
  },

  // ========== 후세방(後世方) ==========
  {
    id: 'bojung-ikgi-tang',
    name: '보중익기탕',
    hanja: '補中益氣湯',
    school: 'later',
    category: '보익제-보기승양',
    indication: '비위기허증(脾胃氣虛證), 중기하함증. 피로, 자한, 내장하수.',
    keySymptoms: ['피로', '기단', '자한', '식욕부진', '권태'],
    targetPatterns: ['비위기허증', '중기하함증'],
    contraindications: ['음허화왕', '간양상항'],
    modernApplications: ['만성피로증후군', '위하수', '자궁탈출', '탈항'],
    herbs: [
      { name: '황기', amount: '18g', role: '군', function: '대보비폐원기, 승양고표' },
      { name: '인삼', amount: '9g', role: '신', function: '대보원기' },
      { name: '백출', amount: '9g', role: '신', function: '건비조습' },
      { name: '감초', amount: '6g', role: '좌', function: '익기보중' },
      { name: '당귀', amount: '6g', role: '좌', function: '양혈화영' },
      { name: '진피', amount: '6g', role: '좌', function: '이기조중' },
      { name: '승마', amount: '3g', role: '사', function: '승양거함' },
      { name: '시호', amount: '3g', role: '사', function: '승양해울' },
    ],
    clinicalNotes: '이동원의 비위론에서 창안. 기허 환자의 대표 처방.',
    lectureNotes: '후세방 보익제의 대표. 승마, 시호의 승양 작용이 핵심.',
  },
  {
    id: 'gwibi-tang',
    name: '귀비탕',
    hanja: '歸脾湯',
    school: 'later',
    category: '보익제-보혈',
    indication: '심비양허증(心脾兩虛證). 불면, 건망, 심계, 식욕부진.',
    keySymptoms: ['불면', '건망', '심계', '피로', '식욕부진', '다몽'],
    targetPatterns: ['심비양허증'],
    contraindications: ['실열증', '담화'],
    modernApplications: ['불면증', '신경쇠약', '빈혈', '불안장애'],
    herbs: [
      { name: '백출', amount: '9g', role: '군', function: '건비익기' },
      { name: '당귀', amount: '9g', role: '군', function: '보혈양심' },
      { name: '백복령', amount: '9g', role: '신', function: '건비영심' },
      { name: '황기', amount: '12g', role: '신', function: '보기' },
      { name: '용안육', amount: '9g', role: '신', function: '보심익비' },
      { name: '산조인', amount: '9g', role: '좌', function: '양심안신' },
      { name: '인삼', amount: '6g', role: '좌', function: '대보원기' },
      { name: '목향', amount: '6g', role: '좌', function: '행기성비' },
      { name: '감초', amount: '3g', role: '사', function: '조화제약' },
      { name: '원지', amount: '6g', role: '좌', function: '안신익지' },
    ],
    clinicalNotes: '과로와 스트레스로 인한 심비 손상에 사용. 현대의 번아웃 증후군에 적합.',
    lectureNotes: '강의에서 언급된 대표 처방. 과도한 사고로 인한 심비 손상 치료.',
  },
  {
    id: 'nokyong-daebo-tang',
    name: '녹용대보탕',
    hanja: '鹿茸大補湯',
    school: 'later',
    category: '보익제-보양',
    indication: '원기허손(元氣虛損), 허로(虛勞). 극심한 피로, 기력 저하.',
    keySymptoms: ['극심한 피로', '기력저하', '식욕부진', '소화불량', '냉감'],
    targetPatterns: ['원기허손', '기혈양허'],
    contraindications: ['실열증', '외감표증', '음허화왕'],
    modernApplications: ['만성피로', '회복기', '노화', '만성 소모성 질환'],
    herbs: [
      { name: '녹용', amount: '8g', role: '군', function: '보신양, 익정혈' },
      { name: '인삼', amount: '6g', role: '신', function: '대보원기' },
      { name: '황기', amount: '9g', role: '신', function: '보기고표' },
      { name: '당귀', amount: '6g', role: '좌', function: '보혈' },
      { name: '숙지황', amount: '12g', role: '좌', function: '보혈자음' },
      { name: '백출', amount: '9g', role: '좌', function: '건비' },
      { name: '백복령', amount: '9g', role: '좌', function: '건비이수' },
      { name: '감초', amount: '3g', role: '사', function: '조화제약' },
    ],
    clinicalNotes: '장기간의 허로 환자에게 적합. 녹용의 강력한 보양 작용으로 원기 회복.',
    lectureNotes: '강의에서 언급된 허로 치료 대표 처방.',
  },
  {
    id: 'chunma-gudeung-eum',
    name: '천마구등음',
    hanja: '天麻鉤藤飮',
    school: 'later',
    category: '평간제-평간잠양',
    indication: '간양상항증(肝陽上亢證). 두통, 현훈, 이명.',
    keySymptoms: ['두통', '현훈', '이명', '면홍', '심번이노'],
    targetPatterns: ['간양상항증'],
    contraindications: ['기혈양허', '담음두통'],
    modernApplications: ['고혈압', '편두통', '메니에르병'],
    herbs: [
      { name: '천마', amount: '9g', role: '군', function: '평간식풍' },
      { name: '구등', amount: '12g', role: '군', function: '청열평간' },
      { name: '석결명', amount: '18g', role: '신', function: '평간잠양' },
      { name: '치자', amount: '9g', role: '좌', function: '청열사화' },
      { name: '황금', amount: '9g', role: '좌', function: '청열조습' },
      { name: '우슬', amount: '12g', role: '좌', function: '인혈하행' },
      { name: '두충', amount: '9g', role: '좌', function: '보간신' },
      { name: '익모초', amount: '9g', role: '좌', function: '활혈이수' },
      { name: '상기생', amount: '9g', role: '좌', function: '보간신' },
      { name: '야교등', amount: '9g', role: '사', function: '양심안신' },
      { name: '복신', amount: '9g', role: '사', function: '영심안신' },
    ],
    clinicalNotes: '간양상항으로 인한 두통, 어지러움의 대표 처방.',
  },
  {
    id: 'banha-baekchul-chunma-tang',
    name: '반하백출천마탕',
    hanja: '半夏白朮天麻湯',
    school: 'later',
    category: '거담제-연비화담',
    indication: '풍담상역증(風痰上逆證). 현훈, 두통, 흉민.',
    keySymptoms: ['현훈', '두중', '두통', '흉민', '오심'],
    targetPatterns: ['풍담상역증', '담탁중조증'],
    contraindications: ['음허양항', '간양화풍'],
    modernApplications: ['메니에르병', '이석증', '비만형 어지러움'],
    herbs: [
      { name: '반하', amount: '9g', role: '군', function: '연비화담, 강역지구' },
      { name: '천마', amount: '6g', role: '군', function: '식풍지경' },
      { name: '백출', amount: '9g', role: '신', function: '건비조습' },
      { name: '복령', amount: '6g', role: '좌', function: '건비이수' },
      { name: '진피', amount: '6g', role: '좌', function: '이기화담' },
      { name: '감초', amount: '3g', role: '사', function: '조화제약' },
      { name: '생강', amount: '6g', role: '사', function: '온위지구' },
      { name: '대조', amount: '2개', role: '사', function: '보비화중' },
    ],
    clinicalNotes: '담음으로 인한 어지러움의 대표 처방. 비만 체형에 적합.',
  },
  {
    id: 'yongdam-sahgan-tang',
    name: '용담사간탕',
    hanja: '龍膽瀉肝湯',
    school: 'later',
    category: '청열제-청간사화',
    indication: '간담습열증(肝膽濕熱證). 흉협통, 구고, 목적.',
    keySymptoms: ['흉협통', '구고', '목적', '이롱', '두통'],
    targetPatterns: ['간담습열증', '간화상염증'],
    contraindications: ['비위허한', '음허'],
    modernApplications: ['급성 간염', '담낭염', '대상포진', '고혈압'],
    herbs: [
      { name: '용담초', amount: '6g', role: '군', function: '청간사화' },
      { name: '황금', amount: '9g', role: '신', function: '청열조습' },
      { name: '치자', amount: '9g', role: '신', function: '청열사화' },
      { name: '택사', amount: '12g', role: '좌', function: '이수삼습' },
      { name: '목통', amount: '9g', role: '좌', function: '청열이습' },
      { name: '차전자', amount: '9g', role: '좌', function: '청열이수' },
      { name: '당귀', amount: '6g', role: '좌', function: '양혈' },
      { name: '생지황', amount: '9g', role: '좌', function: '청열양음' },
      { name: '시호', amount: '6g', role: '사', function: '소간해울' },
      { name: '감초', amount: '3g', role: '사', function: '조화제약' },
    ],
    clinicalNotes: '간담습열을 사하는 대표 처방. 스트레스성 질환에 다용.',
  },

  // ========== 사상방(四象方) ==========
  {
    id: 'taeum-jowi-tang',
    name: '태음조위탕',
    hanja: '太陰調胃湯',
    school: 'sasang',
    category: '태음인방',
    indication: '태음인 위완한증(胃脘寒證). 소화불량, 복부팽만.',
    keySymptoms: ['소화불량', '복부팽만', '식후더부룩', '변비경향'],
    targetPatterns: ['태음인 위완한증'],
    contraindications: ['소양인', '소음인', '태양인'],
    modernApplications: ['태음인 소화불량', '비만', '대사증후군'],
    herbs: [
      { name: '의이인', amount: '8g', role: '군', function: '건비이습' },
      { name: '건율', amount: '8g', role: '신', function: '건비익위' },
      { name: '맥아', amount: '4g', role: '좌', function: '소식화적' },
      { name: '나복자', amount: '4g', role: '좌', function: '소식화담' },
      { name: '오미자', amount: '4g', role: '사', function: '렴폐지해' },
      { name: '마황', amount: '4g', role: '사', function: '발표이수' },
      { name: '길경', amount: '4g', role: '사', function: '선폐이기' },
    ],
    clinicalNotes: '동의수세보원의 태음인 대표 처방. 간대비소한 체질 특성 고려.',
    lectureNotes: '사상방의 대표적 처방. 체질 진단 후 사용.',
  },
  {
    id: 'soeum-bojung-ikgi-tang',
    name: '소음인보중익기탕',
    hanja: '少陰人補中益氣湯',
    school: 'sasang',
    category: '소음인방',
    indication: '소음인 비기허증. 피로, 식욕부진, 소화불량.',
    keySymptoms: ['피로', '식욕부진', '소화불량', '냉감', '설사경향'],
    targetPatterns: ['소음인 비기허증'],
    contraindications: ['태음인', '소양인', '태양인'],
    modernApplications: ['소음인 만성피로', '소화불량'],
    herbs: [
      { name: '황기', amount: '8g', role: '군', function: '보기' },
      { name: '인삼', amount: '4g', role: '신', function: '대보원기' },
      { name: '백출', amount: '4g', role: '좌', function: '건비' },
      { name: '감초', amount: '4g', role: '좌', function: '익기' },
      { name: '당귀', amount: '4g', role: '좌', function: '보혈' },
      { name: '진피', amount: '4g', role: '좌', function: '이기' },
      { name: '승마', amount: '2g', role: '사', function: '승양' },
      { name: '시호', amount: '2g', role: '사', function: '해울' },
    ],
    clinicalNotes: '소음인 체질에 맞게 변형된 보중익기탕.',
  },
  {
    id: 'soyang-hyungbang-jihwang-tang',
    name: '형방지황탕',
    hanja: '荊防地黃湯',
    school: 'sasang',
    category: '소양인방',
    indication: '소양인 음허증. 열감, 갈증, 변비.',
    keySymptoms: ['열감', '갈증', '변비', '불면', '피부건조'],
    targetPatterns: ['소양인 음허증'],
    contraindications: ['태음인', '소음인', '태양인'],
    modernApplications: ['소양인 열증', '피부질환', '갱년기 증상'],
    herbs: [
      { name: '숙지황', amount: '8g', role: '군', function: '자음보혈' },
      { name: '산수유', amount: '4g', role: '신', function: '보간신' },
      { name: '복령', amount: '4g', role: '좌', function: '이수건비' },
      { name: '택사', amount: '4g', role: '좌', function: '이수' },
      { name: '목단피', amount: '4g', role: '좌', function: '청열양혈' },
      { name: '형개', amount: '4g', role: '사', function: '소풍' },
      { name: '방풍', amount: '4g', role: '사', function: '거풍' },
    ],
    clinicalNotes: '소양인 체질의 음허 상태에 사용.',
  },
]

// 처방 검색 함수
export function searchFormulaCases(keyword: string): FormulaCase[] {
  return FORMULA_CASES.filter(
    (formula) =>
      formula.name.includes(keyword) ||
      formula.hanja.includes(keyword) ||
      formula.indication.includes(keyword) ||
      formula.keySymptoms.some((s) => s.includes(keyword)) ||
      formula.targetPatterns?.some((p) => p.includes(keyword))
  )
}

// 학파별 처방 조회
export function getFormulaCasesBySchool(school: MedicineSchool): FormulaCase[] {
  return FORMULA_CASES.filter((formula) => formula.school === school)
}

// 증상별 처방 조회
export function getFormulaCasesBySymptom(symptom: string): FormulaCase[] {
  return FORMULA_CASES.filter((formula) =>
    formula.keySymptoms.some((s) => s.includes(symptom))
  )
}

// ID로 처방 조회
export function getFormulaCaseById(id: string): FormulaCase | undefined {
  return FORMULA_CASES.find((formula) => formula.id === id)
}
